import Database from 'better-sqlite3';

const db = new Database('quiz.db');

db.prepare(`
CREATE TABLE IF NOT EXISTS users (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  username TEXT UNIQUE,
  rating INTEGER DEFAULT 1500,
  wins INTEGER DEFAULT 0,
  losses INTEGER DEFAULT 0
)
`).run();

db.prepare(`
CREATE TABLE IF NOT EXISTS questions (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  question TEXT,
  options TEXT,
  answer TEXT
)
`).run();

db.prepare(`
CREATE TABLE IF NOT EXISTS matches (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  user1_id INTEGER,
  user2_id INTEGER,
  winner_id INTEGER,
  rating_change_user1 INTEGER,
  rating_change_user2 INTEGER,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP
)
`).run();

export default db;
